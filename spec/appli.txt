Le Contexte :
-------------

Il s'agit d'une application open-source de repetition de theatre en italiennes, fonctionnellement proche de Imperato ou SynqRo ou Script Rehearser.
Pour simplifier le developpement, je veux que l'appliction soit de type web PWA. Elle pourra s'executer dans le navigateur mais aussi sur android et ios en tant qu'applicatiin PWA.
Je voudrais, si possible aussi qu'elle soit de type SPA et s'execute entierement dans le navigateur et aura un designe minimal et epure.


Fonctionalites :
----------------

Pas d'authentification.

A. Ecran "principal" :
Il montre simplement la liste des textes deja disponibles et un bouton d'ajout pour importer un nouvrau texte de type .txt au format attendu.
Chaque texte est presente succinctement sur une ligne et est cliquable.
Lorsque l'on clique sur le bouton ajouter, on choisit un fichier texte via la boite de saisie systeme standard et le texte est automatiquement importe. Si l'importation est reussie, le texte apparait dans la.liste des textes, sinon une erreur est affichee.

B. Ecran "Texte :
Il s'ouvre lorsque l'on clique sur un texte de la liste de l'ecran principal. Il est compose de 5 blocs, les deux premiers etant bien mis en avant :
* Dans un premier bloc :
Le titre du texte (si le texte importe ne definissait pas de titre, c'est le nom de fichier qui est utilise) et (s'ils sont connus) son auteur, son annee, sa categorie (comedie, drame, etc.)
* Dans un second bloc :
La methode de lecture :
Lecture silencieuse, piece ou italienne
Chaque methode est cliquable.
* Dans un troisieme bloc :
Les voix : ce bloc permet d'affecter des voix a chacun des personnages de la piece. En fait, par defaut, il ne permet que de choisir le sexe du personnage et l'application choisira une voix de femme ou d'homme en finction de ce choix).
* Un quatrieme bloc offre les reglages :
- voix off active / inactive (lecture ou non des didascalies dans les methodes lecture et italiennes
- vitesse de lecture (entre 0.5 et 2 et 1 pzmar defaut)
- vitesse de lecture utilisateur (italiennes) entre 0.5 et 2, et a par defaut
- cacher les repliques de l'utilisateur (non oar defaut), et si active : "afficher avant" (non par defaut) et/ou "afficher apres" (oui par defaut)
- theme sombre ou clair (clair par defaut)
* Un dernier bloc "suppression" qui permet, apres confirmation, de supprimer un texte.

C. Ecran lecture silencieuse:
Il s'agit d'un ecran simple ou la piece est presentee de maniere simple et claire.
La presentation est proche du format des fichiers textes mais les passages de lignes vierges multiples sont elimines.
La police par defaut est noire pour le theme claire et blanche pour le theme sombre.
Les didascalies sont en italique et en couleur grise.
Les titres, actes et les scenes sont en gras.
Les actes sont dans une police de taille legerement plus grande que celle des repliques et des scenes.
Les titres sont dans une.police de.taille legerement plus grande que celle des actes.
Le texte des repliques utilise la couleur par defaut mais le nom du personnage est en gras et d'une couleur specifique au personnage (affectee automatiquement par l'application).
L'utilisateur peut aisement scroller a travers le texte de la piece mais il peut directement et a tout moment passer a la scene suivante ou precedente en.cliquant sur des boutons de.navigation discrets et il doit pouvoir, de la meme maniere, acceder a et naviguer a travers un sommaire (actes/scenes).

D. Ecran de lecture audio :
Il est semblable a l'ecran de lecture silencieuse. Simplement, lorsque l'utilisateur clique sur une replique, la lecture audio de la replique, puis des suivantes, est declenchee.
Durant la lecture d'une replique, une animation discrete apparait tout a sa droite pour indiquer sa progression.
Si l'utilisateur clique sur une replique en cours de lecture audio, la lecture est immediatement mise en pause et reprend s'il y a a nouveau un clique sur la replique.
Durant la lecture audio d'une replisue, si l'utilisateur clique sur une autre replique du texte, la replique en cours  mest immediatement interrompue et la nouvelle est lue (puis les.suivantes).

D. Ecran des italiennes :
Cette ecran est tres semblable, dans son apparence et son fonctionnement a l'ecran de lecture audio.
Il comprend en plus un bouton qui permet de selectionner (dropbox) le personnage que l'utilsateur joue durant l'itelienne. Le libelle de ce bouton devrait etre le.nom.du personnage selectionne (la memoire du denier personnage selectionne est conservee entre deux italiennes et le premier personnage de la piece est selectionne par defaut).
Si dans les reglages, l'option "cacher mes repliques" est activee mais que l'option "afficher avant" n'est pas activee, alors, toutes les textes des  reqliques du personnage de l'utilisateur sont affichees au depart en gris sur fond gris (espaces compris).
Au moment ou la lecture audio d'une replique  de l'utilisateur commence, si l'option "cacher mes repliques" est activee, alors le texte de la replique passe immediatment en gris sur fond gris.
Au moment ou la lecture audio d'une replique utilisateur se termine, si "cacher mes.repliques" et "afficher "apres" sont activees, alors le texte de la replique reprend la.couleur par defaut.

E. Lecture audio :
Pour une replique, le nom du personnage n'est jamais lu. Le texte de replique, hors didascalie, est lu par la voix associee au personnage de la replique et les didascalies sont lues par la voix off,.si elle est activee, et ne sont simplement pas lues su la voix off est desactivee.
 La lecture audio des repliques des personnages (tous pour la lecture audio et  autre que l'utilisateur dans le cas des italiennes) s'effectue a la vitesse indiquee dans le reglage "vitesse de lecture" et au volume par defaut.  Dans les italiennes, la lecture des repliques de l'utilisateur s'effectue a la vitesse indiquee par le reglage "vitesse de lecture" et a un volume  zero.



Format des fichiers textes :
----------------------------

Le format des textes (toujours des fichiers texte .txt) importes est classique et simple :

I. Le titre correspond a au premier bloc de texte isole (suivi d'une ligne vierge) qui commence la piece et qui n'est pas un acte, un auteur, une scene, une annee ou une replique. Si aucun titre n'est fourni, c'est le nom du fichier qui sera utilise.
II. Un acte est presente apres une.ligne vierge (double passage a la ligne) par le mot clef Acte au tout debut de la ligne suivi de son  numero et/ou d'un libelle quelconque qui tient entierement sur la ligne.  Un exemple :

Acte II : Paris est un monde

La ligne de declaration d'un acte est lue  par la voix off (si activee).

II. Une scene est presentee exactement de la meme maniere, mais avec le mot clef Scene ou Scène. Un exemple :

Scene 1 - Arrivée du duc

La ligne de declaration d'une scene est lue par la voix off (si activee).

III. L'auteur est presente exactement de la meme maniere, mais avec le mot clef Auteur et il ne peut apparaitre que tout de suite apres le titre. Un exemple :

Auteur : Victor Hugo

IV. L'annee est presentee exactement de la meme maniere, mais avec le mot clef Annee et il ne peut apparaitre que juste apres le titre ou apres l'auteur.

V. Les repliques sont presentees, apres une ligne vierge, par le nom du personnage, toujours en majuscule sur une seul ligne (il commence par une lettre mais  peut comprendre des espaces, des tirets, des nimeros, meme des caracteres speciaux autres que ':' et est suivi du caractère ':' suivi d'un retour a la ligne et du texte de la replique.
Le texte de la replique peut se repartir sur plusieurs lignes, dont des lignes vierges.

La fin d'une replique est determine par :
- le debut d'une autre replique (donc identifie par une ligne vierge, une ligne commançant par un nom de personnage en majuscule suivi de ':' et un retour a la ligne.)
- la declaration d'un acte
- la declaration d'une scene
- La fin d'un texte

VI. Les didascalies sont les portions de texte entre parentheses au sein des repliques.
Les blocs de textes qui ne sont pas des repliques et qui ne sont pas le titre (typiquement les blocs de texte qui suivent le titre, l'auteur, l'annee, un acte ou une scene et qui ne sont pas des repliques car ils ne commencent pas par une ligne pour le nom de personnage) sont consideres comme des didascalies, meme si ils ne sont pas entre parenthese. Ils apparaissent donc en gris et italique et sont lus par la voix off (si elle est activee).

Ma question :
-------------

Analyse les besoins cocnernat cette application. Propose moi une architecture logicielle complète, notamment :
Liste moi les outils / librairies open-sources sur lesquelles je peux m'appuyer (notamment pour :
- générer le parseur des textes à importer
- lire en audio les répliques
- framework front pour créer une interface épurée et réactive).
N'oublie pas que l'application doit pouvoir fonctionner dans le navigateur ET sur Android  ET sur IOS, sans appel à un backend.
Décris moi de manière assez précise l'architecture que tu préconises, dont les différents modules qui la composent et leur articulation.
